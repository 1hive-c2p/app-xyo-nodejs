import { IXyoPlugin, IXyoGraphQlDelegate } from '@xyo-network/sdk-base-nodejs'

const pingType = `
    type Ping {
        ping: String
    }
`

export class XyoPingPlugin implements IXyoPlugin {
  public getName(): string {
    return 'ping'
  }

  public getProvides(): string[] {
    return ['ping']
  }

  public getPluginDependencies(): string[] {
    return []
  }

  public async initialize(deps: { [key: string]: any; }, config: any, graphql?: IXyoGraphQlDelegate | undefined): Promise<boolean> {
    if (!graphql) {
      throw new Error('Expecting GraphQl interface')
    }

  // tslint:disable-next-line:max-line-length
    const s = "##############################################################################\r\n                                                                             #\r\n                                                                             #\r\n                                                                             #\r\n                                .:;;;;;;;:`                                  #\r\n                              :';'';;'';;';;,                                #\r\n                            ;'''''';''';'''';;.                              #\r\n                  .;';';::;;'''';'''''''''';'';.                             #\r\n                 ;;''''''''''''';;''''''''''''';`                            #\r\n                ;;''''''''''''''';'''''''''''''';                            #\r\n               :;'''''''''''''''''''''''''''''''';                           #\r\n              `;''''''''''''''''''''';''''''''''';`                          #\r\n              :;''''''''';'''''''''''';''''''''''';                          #\r\n              ;''''''''''''''''''''''''''''''''''';`                         #\r\n              ;''''''''''''''''''''''''''''''''''';:                         #\r\n             `;''''''''''''''''''''''''''''''''''';;                         #\r\n             `;'''''''''''''''''''''''''''''''''''';.                        #\r\n             ,;'''''''''''''''''''''';''''''''''''';;                        #\r\n             :'''''''''''''''''''''''''''''''''''''''`                       #\r\n             ;;'''''''''''''''''''''''''''''''''''''':                       #\r\n             ''''''''''''''''+++##++#++#######++''''''`                      #\r\n             ;'''''''''+#############+############+''',                      #\r\n             ;'''''+###############++################';                      #\r\n            `;'''+################+#+#+################`                     #\r\n            .;'+#####################+##################                     #\r\n            ,;+#########################################'                    #\r\n            :############################################                    #\r\n            +#######################++##++###############.                   #\r\n           ,######################+######################'                   #\r\n           '+#########################+###############++'';;'''+';,`         #\r\n           ++##################################++'''++++++''''''''''':       #\r\n           ++###################+####+++'';;''+#########+++''''''''''',      #\r\n           +##################+'''''''';'+###############+++'''''''''''      #\r\n           +##############+'';;;;'''+####################+++++'''''''''      #\r\n           +###########+';;;;;'++#########################++++'''''''';      #\r\n`          +#######+';;;'''+###############################++++''''''':      #\r\n  `        +####+;;;;'+################++''+################+++++'''''`      #\r\n   `      `+#+;;;'+################++++';..,:+########+#+####+++''''';       #\r\n    ``   `:;'++##################+#'++;;,,:++'+#########++###+++'''''`       #\r\n      .,'+#################+++#'#+:++';,,;####'++++++++#++####++'''':        #\r\n   .;+##################+##++++#+''''':;:#####+;'++++++++#####''''';         #\r\n ;'+####+#########++++#+++++'+++'''++;;:+######:;'''+++'+++##+'''';          #\r\n'++#####+#+####+++++#+##+'+'++++'';'';::';+####:,';'''''+++##'''';`          #\r\n''++####+++#'+#++++++++++#+'++'+;;;';::';;+####,:;'''''+'++#'''';.           #\r\n;'+++####''#++++++##+++++++'++'+;;+';::+##+####;,:;;'''+''##''';             #\r\n.;;'+####'+#+#+#+#+'++'++'+#++''::'':;;########+,:''''''';##'',              #\r\n``.;''+#''#++++++##+'+++++'+'''.;;';;;'+########,:'''';;';+#;`               #\r\n     ,'+''++++++++++++++++++:;::;;;;;;+'++#####+:;'+''''+';#` `              #\r\n       `;++''++'+++#+''''++';;';:::;;;'++++###+;;;+''''+'';#``               #\r\n         +++'++#'#+++'++;'+,;;+';::,;;;;;:;;';;:;'''''++'''+;                #\r\n        .++''++''+'+++'+';;;:;;;:::::;;:,.:,,,,:''';;'''''';;                #\r\n        ''+''''+'#+++++;;'+;';;;:;:;::;;;,,:,,:'+''';+''''++'                #\r\n      '##;+'+;'+++++''''+';';;;:;,;:;;';;;;::;'+'+'';;'''''+#,               #\r\n   ``+###;+'''+++''++'':'+'''':';;,;;';'';''''+++''';;++'+'#++,              #\r\n `.`'####'+''''++'++'+'''+;+';;';:;,;;;+''''+''+'+''';'+++'#'++;             #\r\n`  `+####'''''+:+++''+:''''''+;'';:;:::;;;';;+'';''';;:'';;''++++`           #\r\n  `,+####'''''+''++''';+''+++'''';''',:,;;;';;:;;';;;;::;';;;#++#,           #\r\n    ++###'''++';++++';;'''+++++++'';;:,:':;;;;:;;''::;::;';';##+++'`         #\r\n   `++##++'+++''+'+;'';;'';;;';;;'';::::,,:::,::,';';;:;;;+'''++#+++,        #\r\n. `,+###'''+'+;'++'';;;;;':;;;;;:;;''':::::,:,::::;;';::;+'::+++#++++:       #\r\n   ;'+##'''+;+;+++';;;;;;;::;:;::';::,,,:,,,,,:::;:;;::;++:;,;+'+++'+''      #\r\n   ;++##;;'+;''++++';;:;;;::::;':,:::,..,,:;;::::,:;:::'#:.,,:+'+++#'++      #\r\n   ,+++#;'+'';'++++';;;;;;:::;:::,,,,,:,,;';'';::,,;',;':.`.,:++##++;+.      #\r\n    ++++''+;;'''#+'';;;''::::::::;':,:,,,:.,,,::,,::;:;+:.``,;++++;++`       #\r\n`  .;+++':'';';'++';;;;'':;:::::;,....,`...,,.,;:,,,:'+:` `,,:++'+;#+        #\r\n .`` '+#+;;';'''++;;;;;';,:::::,..,,:;:,,::;;:;,:,,:'#,` `..;+++:++++'       #\r\n.    '++#';';';''';;;;;+:,::::,,.,..`.``..`:,,:,:::'#:`  `.:++#+'++#++;      #\r\n     ;++##';';''''''''';,,::::,:,.`.`.``.,..,:,,,,++.`` ``.:####+#'+++''.    #\r\n     +++#+';;;'++++++#':,,:::,,..,:,.,`...,,.,,,.''`    ..;+#+###+#++#+++'`  #\r\n   `;##++++';;;'++++++;:,::::.,:..``.`,,..,,,,,:+;`   ``.;++#+'#+'+++#++'++',#\r\n  `,+###+#+';;;;'+++';::,:,,,...,,.```,.:,,,.,;',```  `.,'++++'+#'##+++'++++'#\r\n ` +++#####+;;;;;;:'';:::::,,,,,,,,`..,,,,:,,+;``  ` `.,,'++++++++++++:#++++'#\r\n`  ;########';;;;;;;++;;;::,,,:::,.,,::::,,::.``   ``...;+++++++;+'###'#'++''#\r\n` `#+#######++;;;;;;'++';;;:::::,,:::;;::,,..````  ``.,:'+##++#+#+++++###+''+#\r\n  ,#++####++##+';;;;''++'';::;;;;::;::::,,,.`` ````..,,:++##'+#:+'++#:++++'+##\r\n  ,+############'';;'''+'+++'';;;;:;:;:::,.````````..,::'##+'#+++##++;#'+++++#\r\n `.+++##+####+##+++++''';''''''''';;;;;;:..````.`..,.,,:+#++#+:+'++'++++#'+'+#\r\n  :+#+####+####+#++###+++++++#####+';::,..``````...,..,;+##++++####+#+##+++:+#\r\n  :++#++#######################++##+'':.....`.`...,,,,:+##'++'#'#+#+#+##+++:+#\r\n  '++###+######################+###+#+':..`..`...,,,,,:##++#+#++'####++##++'+#\r\n `+##+#####+###################+##+;`+##'....`.......,;++#++'++#+++#+++#+++++#\r\n ++#++++##############################+++';..,.....``.'#+##'+++++#++##+++++++#\r\n:'+###+##########+######++############+;:#';,,...```.,#++#++++#++#++##+#'+++##\r\n'+###+#############+#######+##+#####+####+#+;:,.```..;#+';#++++++++#+++#;#+#+#\r\n+'#+#'######+#########++#####+#+'+######+##++;:,,...,;++#+#+#+#++++++++#+#+++#\r\n+#+'#+######+##+#########;++###'##;'########+';:,,.,:;####+##++'#++###'##++++#\r\n+#++####+####+####+#+######+'+++#++###++'####+;;:,,,;;###+#+#;#'#+++++###+#+##\r\n########+##+####+######+#####++'+#+#'+####+:+#+;::,,;+++++#+#'#;#'#+#'++#;#;##\r\n#++#'####+#;##+####'##;##++#####+':#+#+'++###+:':;:;'++':++++##,#'#'+;#+#'+;##\r\n+;###+##+##+#####;###########+######:+##++:####+;;;'+#;++#+;##+.#+#++++'+++++#\r\n'+#+#+###'##'##+#######:#+'##'##''####+++#+#####+;''++#+++#+#+++++'+;#+#++##+#\r\n'##+##+#+#+#+##'##;##+#####'#++##;':#####++#+#+##''++++++++;#+##+#++#+:#+#;#'#\r\n##+#'####+###'##+###+###+###+##+##'+#;+###++++##+#++##+#'++++++##++;+#+++#'#+#\r\n##+#######++####;##;##'+#'##;+#++#++###''++##+####++#+##++#+;##++#+++;++#+#+##\r\n+##+##+#####+#+##'#####+##+##;#++#+;#+'+#';###+####+##++#+#++#+#;#+#++#'+'#'##\r\n+#+#'##;#####+###'##'##'#####+###;#+'++;#++#;+##++###+'+#'#++#++#+##;###++##+#\r\n##'+####+#+####+##;##+##:#+++#;#####++++##+##;'###+##+'+#+++++#;+'++#++#'+;++#\r\n+#+#+'##+##+#########+###+##'##'##'+#+#+'#+'##:++###+++++##+#+#++#+'#+####++##\r\n##''+#'##+#########;##+##'##+++++#+:++++#:+#+###++#'#+#+'+++#+:+'#+##++;#;+++#\r\n+######+##+#########;##+##:++'##++##;##:++'+#++;#++,#++++###+#:+++;#+##++:+#+#\r\n';''''++'##'############+#++##.#+++##++#:#++#++#'##+#+#++###++'#'+++##'++#+#'#\r\n+++###+'#+##+###+#+##'#########;#+'##+###;+#'####+#+#+++##+##+#++'#++'+#'#++##\r\n+############+#####+##;#++##+##+#+#;##+#+++##;#++#++#+'+#####+#,#+#+++#;######\r\n##############################################################################\r\n"

    const resolver = {
      async resolve(): Promise<any> {
        return {
          ping: s
        }
      }
    }

    graphql.addType(pingType)
    graphql.addQuery('ping: Ping')
    graphql.addResolver('ping', resolver)
    return true
  }
}

module.exports = new XyoPingPlugin()
